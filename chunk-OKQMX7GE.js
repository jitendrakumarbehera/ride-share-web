import{a as G}from"./chunk-OILLCN2G.js";import{b as k,d as I}from"./chunk-2LW4H3FV.js";import{a as V}from"./chunk-5AT4LRJW.js";import{a as j,b as H}from"./chunk-FT6RPUJH.js";import{b as A,c as $}from"./chunk-IN3M743O.js";import{Aa as D,D as a,Da as y,G as g,H as S,I as T,Ja as P,Ka as _,Na as R,O as s,Oa as m,P as r,Pa as F,Q as i,Qa as M,R as l,Sa as C,Ta as N,Va as q,W as c,Xa as E,b as h,cb as w,da as d,eb as x,fb as O,gb as Y,l as v,o as b}from"./chunk-CVDO2SLE.js";var U=(()=>{let o=class o{constructor(e,n,t){this.fb=e,this.srApiClient=n,this.rideStore=t,this.profilePanelShow=!1,this.validationMessages={rideFrom:[{type:"required",message:"Departure city is required."}],rideTo:[{type:"required",message:"Destination city is required."}],rideDate:[{type:"required",message:"Date is required."}],rideTime:[{type:"required",message:"Time is required."}],rideSeats:[{type:"required",message:"Available Seats are required."},{type:"min",message:"Minimum 1 seat is required."},{type:"max",message:"Maximum 8 seats allowed."}],ridePrice:[{type:"required",message:"Price per seat is required."},{type:"min",message:"Price must be greater than $0."}],driverName:[{type:"required",message:"Driver Name is required."}]},this.initialDateTime="",this.minDate="",this.destroy$=new h}ngOnInit(){let e=new Date;this.initialDateTime=`${e.toISOString().substring(0,10)}T09:00`,this.minDate=e.toISOString().substring(0,10),this.addRideForm=this.fb.group({rideFrom:["",m.required],rideTo:["",m.required],rideDate:[this.initialDateTime,m.required],rideTime:["",m.required],rideSeats:[1,[m.required,m.min(1),m.max(8)]],ridePrice:["",[m.required,m.min(.01)]],driverName:["",m.required]})}openProfile(e){console.log(e),this.profilePanelShow=e}onSubmit(){if(!this.addRideForm.valid){console.log("Form is invalid.",this.addRideForm),this.addRideForm.markAllAsTouched(),V.scrollToFirstInvalidControl(this.addRideForm);return}this.srApiClient.addRide(this.requestRideMapper(this.addRideForm.value),this.rideStore.get("JwtToken")).pipe(v(this.destroy$)).subscribe({next:e=>{},error:e=>{console.log(e)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}requestRideMapper(e){return{sourceLocation:e.rideFrom,destinationLocation:e.rideTo,totalSeats:e.rideSeats,noOfSeatsAvailable:e.rideSeats,rideTime:new Date(`${e.rideDate}T${e.rideTime}`).toISOString(),vehicleModel:"Not Available",vehicleColour:"Not Available",pricePerPerson:e.ridePrice}}handleRideDateChange(e){this.addRideForm.get("rideDate")?.setValue(e),console.log("Ride Date Updated:",e)}handleRideDateTimeChange(e){this.addRideForm.get("rideTime")?.setValue(e),console.log("Ride Date Time Updated:",e)}};o.\u0275fac=function(n){return new(n||o)(g(w),g(x),g(_))},o.\u0275cmp=S({type:o,selectors:[["sr-publish-ride"]],standalone:!1,decls:49,vars:17,consts:[["id","home-page",1,"page","min-vh-100","position-relative"],[3,"isProfileOpen"],[3,"isHideProfile","profilePanelShow"],[1,"main-content"],[1,"container"],[1,"card","border-0","shadow-sm","mb-5","add-ride-section",2,"border-radius","16px"],[1,"card-body","p-4"],[1,"mb-4","text-dark","fw-semibold","fs-5"],[1,"row","g-3",3,"formGroup"],[1,"col-md-6","col-lg-3"],["for","ride-from",1,"form-label","fw-semibold","text-dark","small"],["type","text","id","ride-from","placeholder","Departure city","formControlName","rideFrom",1,"form-control","form-control-custom"],["for","rideFrom",3,"messages"],["for","ride-to",1,"form-label","fw-semibold","text-dark","small"],["type","text","id","ride-to","placeholder","Destination city","formControlName","rideTo",1,"form-control","form-control-custom"],["for","rideTo",3,"messages"],["for","ride-date",1,"form-label","fw-semibold","text-dark","small"],["formControlName","rideDate",3,"dateTimeSelect","mode","initialDateTime","minDate","dateFormat"],["for","rideDate",3,"messages"],["for","ride-time",1,"form-label","fw-semibold","text-dark","small"],["formControlName","rideTime",3,"dateTimeSelect","mode","initialDateTime","minDate","dateFormat"],["for","rideTime",3,"messages"],["for","ride-seats",1,"form-label","fw-semibold","text-dark","small"],["type","number","id","ride-seats","placeholder","1","formControlName","rideSeats",1,"form-control","form-control-custom"],["for","rideSeats",3,"messages"],["for","ride-price",1,"form-label","fw-semibold","text-dark","small"],["type","number","id","ride-price","step","0.01","placeholder","25.00","formControlName","ridePrice",1,"form-control","form-control-custom"],["for","ridePrice",3,"messages"],["for","driver-name",1,"form-label","fw-semibold","text-dark","small"],["type","text","id","driver-name","placeholder","Your name","formControlName","driverName",1,"form-control","form-control-custom"],["for","driverName",3,"messages"],[1,"col-12","text-center","mt-4"],["type","submit","id","submit-btn",1,"btn","btn-success-gradient","text-white","px-5","py-3",3,"click"],["id","submit-text"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"sr-header-app",1),c("isProfileOpen",function(f){return t.openProfile(f)}),i(),r(2,"sr-profile",2),c("isHideProfile",function(f){return t.openProfile(f)}),i(),r(3,"main",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),d(8,"Offer a Ride"),i(),r(9,"form",8)(10,"div",9)(11,"label",10),d(12,"From"),i(),l(13,"input",11)(14,"sr-validation-message",12),i(),r(15,"div",9)(16,"label",13),d(17,"To"),i(),l(18,"input",14)(19,"sr-validation-message",15),i(),r(20,"div",9)(21,"label",16),d(22,"Date"),i(),r(23,"sr-date-time-picker",17),c("dateTimeSelect",function(f){return t.handleRideDateChange(f)}),i(),l(24,"sr-validation-message",18),i(),r(25,"div",9)(26,"label",19),d(27,"Time"),i(),r(28,"sr-date-time-picker",20),c("dateTimeSelect",function(f){return t.handleRideDateTimeChange(f)}),i(),l(29,"sr-validation-message",21),i(),r(30,"div",9)(31,"label",22),d(32,"Available Seats"),i(),l(33,"input",23)(34,"sr-validation-message",24),i(),r(35,"div",9)(36,"label",25),d(37,"Price per Seat ($)"),i(),l(38,"input",26)(39,"sr-validation-message",27),i(),r(40,"div",9)(41,"label",28),d(42,"Driver Name"),i(),l(43,"input",29)(44,"sr-validation-message",30),i(),r(45,"div",31)(46,"button",32),c("click",function(){return t.onSubmit()}),r(47,"span",33),d(48,"Add Ride"),i()()()()()()()()()),n&2&&(a(2),s("profilePanelShow",t.profilePanelShow),a(7),s("formGroup",t.addRideForm),a(5),s("messages",t.validationMessages.rideFrom),a(5),s("messages",t.validationMessages.rideTo),a(4),s("mode","date")("initialDateTime",t.initialDateTime)("minDate",t.minDate)("dateFormat","MM-DD-YYYY"),a(),s("messages",t.validationMessages.rideDate),a(4),s("mode","time")("initialDateTime",t.initialDateTime)("minDate",t.minDate)("dateFormat","MM-DD-YYYY"),a(),s("messages",t.validationMessages.rideTime),a(5),s("messages",t.validationMessages.rideSeats),a(5),s("messages",t.validationMessages.ridePrice),a(5),s("messages",t.validationMessages.driverName))},dependencies:[C,R,N,F,M,q,E,O,j,A,k],encapsulation:2});let p=o;return p})();var B=[{path:"",component:U}],ce=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=T({type:o}),o.\u0275inj=b({providers:[{provide:y,useClass:G,multi:!0}],imports:[D,P.forChild(B),Y,H,$,I]});let p=o;return p})();export{ce as PublishRideModule};
