import{a as L,b as le}from"./chunk-BGMZKGSG.js";import{a as me}from"./chunk-35OPR62A.js";import{a as V}from"./chunk-7XBSCFVB.js";import{$a as ae,A as W,D as p,G as f,Ga as P,H as M,Ha as te,I,Ia as ie,J as _,Ja as x,La as re,Ma as R,Na as g,O as d,Oa as j,P as i,Pa as q,Q as n,R as c,Ra as G,S as Y,T as J,Ua as U,V as k,Va as ne,W as y,Wa as H,X as h,Y as N,Z as A,_ as T,_a as oe,ab as se,bb as z,da as s,db as C,ea as X,eb as Q,f as $,fb as B,o as F,ra as ee,s as v,sa as O,t as b,u as S,v as w,za as D}from"./chunk-BFEUN2P3.js";var Se=["otpInput"];function we(a,o){if(a&1){let m=k();i(0,"input",20,0),y("input",function(e){let t=v(m).index,l=h();return b(l.handleInput(t,e))})("keydown",function(e){let t=v(m).index,l=h();return b(l.handleKeyDown(t,e))})("paste",function(e){v(m);let t=h();return b(t.handlePaste(e))}),n()}if(a&2){let m=o.index;d("formControlName",m)("id","otp-"+(m+1))}}function _e(a,o){if(a&1&&c(0,"sr-validation-message",21),a&2){let m=h();d("messages",m.validationMessages.otp)}}function ye(a,o){if(a&1&&(i(0,"span",22),s(1," Didn't receive the code? Resend in "),i(2,"strong",23),s(3),n(),s(4,"s "),n()),a&2){let m=h();p(3),X(m.timeLeft)}}function xe(a,o){if(a&1){let m=k();i(0,"span",24),s(1," Didn't receive the code? "),i(2,"a",25),y("click",function(e){v(m);let t=h();return b(t.resendCode(e))}),s(3," Resend Code "),n()()}}function Ce(a,o){a&1&&(Y(0),s(1," Verify & Continue "),J())}function Ve(a,o){a&1&&(Y(0),c(1,"span",26),s(2,"Verifing OTP... "),J())}var de=(()=>{let o=class o{constructor(r,e,t,l,u){this.fb=r,this.rideStore=e,this.srApiClient=t,this.toastAlert=l,this.router=u,this.timeLeft=60,this.showResendLink=!1,this.validationMessages={otp:[{type:"required",message:"Please enter the complete code."},{type:"pattern",message:"Only numbers are allowed."}]},this.otpForm=this.fb.group({otp:this.fb.array(Array(6).fill("").map(()=>this.fb.control("",[g.required,g.pattern("^[0-9]*$")])))}),this.signUpData={},this.isOtpSubmit=!1,this.isOtpVerified=!1}ngOnInit(){this.startTimer()}get otpArray(){return this.otpForm.get("otp")}startTimer(){this.timeLeft=60,this.showResendLink=!1,this.timerSubscription&&this.timerSubscription.unsubscribe(),this.timerSubscription=$(1e3).subscribe(()=>{this.timeLeft>0?this.timeLeft--:(this.showResendLink=!0,this.timerSubscription?.unsubscribe())})}resendCode(r){r.preventDefault(),console.log("Resending code..."),this.otpArray.reset(),this.startTimer(),setTimeout(()=>this.otpInputs.first.nativeElement.focus(),0)}handleInput(r,e){e.target.value.length===1&&r<5&&this.otpInputs.toArray()[r+1].nativeElement.focus()}handleKeyDown(r,e){e.key==="Backspace"&&!this.otpArray.at(r).value&&r>0&&this.otpInputs.toArray()[r-1].nativeElement.focus()}handlePaste(r){r.preventDefault();let t=(r.clipboardData||window.clipboardData).getData("text").trim();if(!t||isNaN(Number(t)))return;let l=t.split("").slice(0,6);l.forEach((E,K)=>{K<6&&this.otpArray.at(K).setValue(E)});let u=l.length<6?l.length:5;this.otpInputs.toArray()[u].nativeElement.focus()}onSubmit(){if(this.isOtpVerified){this.otpForm.disable();return}if(this.otpForm.invalid){this.otpForm.markAllAsTouched(),V.scrollToFirstInvalidControl(this.otpForm);return}this.isOtpSubmit=!0;let r=this.otpArray.value.join("");this.signUpData=this.rideStore.get("signUpData"),this.srApiClient.verifyAccountOtp({emailId:this.signUpData?.email,userName:this.signUpData?.fullName,password:this.signUpData?.password,otp:r}).subscribe({next:e=>{this.isOtpSubmit=!1,this.isOtpVerified=!0,this.toastAlert.addToast("success","OTP verification Success!","Your account created successfully."),this.router.navigate(["sign-in"])},error:e=>{console.log(e),this.isOtpSubmit=!1,this.toastAlert.addToast("danger","OTP verification failed!","Please enter valid otp.")}})}ngOnDestroy(){this.timerSubscription?.unsubscribe()}};o.\u0275fac=function(e){return new(e||o)(f(z),f(x),f(C),f(L),f(P))},o.\u0275cmp=M({type:o,selectors:[["sr-otp-verification"]],viewQuery:function(e,t){if(e&1&&N(Se,5),e&2){let l;A(l=T())&&(t.otpInputs=l)}},standalone:!1,decls:23,vars:8,consts:[["otpInput",""],[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-logo"],["width","25","height","25","fill","none","stroke","currentColor","viewbox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"auth-title"],[1,"auth-subtitle"],["id","otp-contact-display"],[1,"auth-form"],["id","otp-form",3,"ngSubmit","formGroup"],["formArrayName","otp",1,"otp-inputs"],["type","text","maxlength","1","class","otp-input","inputmode","numeric","autocomplete","one-time-code",3,"formControlName","id","input","keydown","paste",4,"ngFor","ngForOf"],["for","otp",3,"messages",4,"ngIf"],[1,"resend-timer"],["id","resend-timer-text",4,"ngIf"],["id","resend-link-container",4,"ngIf"],["type","submit","id","otp-submit",1,"btn-auth-primary",3,"disabled"],[4,"ngIf"],["type","text","maxlength","1","inputmode","numeric","autocomplete","one-time-code",1,"otp-input",3,"input","keydown","paste","formControlName","id"],["for","otp",3,"messages"],["id","resend-timer-text"],["id","timer-countdown"],["id","resend-link-container"],["href","#","id","resend-otp",1,"resend-link",3,"click"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,t){e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),S(),i(4,"svg",5),c(5,"path",6),n()(),w(),i(6,"h1",7),s(7,"Verify Your Account"),n(),i(8,"p",8),s(9,"Enter the 6-digit code we sent to "),c(10,"br")(11,"strong",9),n()(),i(12,"div",10)(13,"form",11),y("ngSubmit",function(){return t.onSubmit()}),i(14,"div",12),_(15,we,2,2,"input",13),n(),_(16,_e,1,1,"sr-validation-message",14),i(17,"div",15),_(18,ye,5,1,"span",16)(19,xe,4,0,"span",17),n(),i(20,"button",18),_(21,Ce,2,0,"ng-container",19)(22,Ve,3,0,"ng-container",19),n()()()()()),e&2&&(p(13),d("formGroup",t.otpForm),p(2),d("ngForOf",t.otpArray.controls),p(),d("ngIf",t.otpForm.invalid&&t.otpForm.touched),p(2),d("ngIf",!t.showResendLink),p(),d("ngIf",t.showResendLink),p(),d("disabled",t.otpForm.invalid||t.isOtpVerified),p(),d("ngIf",!t.isOtpSubmit),p(),d("ngIf",t.isOtpSubmit))},dependencies:[ee,O,G,R,j,q,se,U,H,ne,Q],encapsulation:2});let a=o;return a})();var Ee=["formControlName"];function Fe(a,o){if(a&1){let m=k();i(0,"div",4)(1,"button",5),y("click",function(){v(m);let e=h();return b(e.pageLink("home"))}),S(),i(2,"svg",6),c(3,"path",7),n()(),w(),i(4,"div",8)(5,"div",9)(6,"div",10)(7,"div",11),s(8," RS "),n(),i(9,"h1",12),s(10,"Create Account"),n(),i(11,"p",13),s(12,"Join RideShare Connect and start sharing rides"),n()(),i(13,"div",14)(14,"div",15)(15,"button",16),S(),i(16,"svg",17),c(17,"path",18)(18,"path",19)(19,"path",20)(20,"path",21),n(),s(21," Google "),n(),w(),i(22,"button",16),S(),i(23,"svg",22),c(24,"path",23),n(),s(25," Facebook "),n()(),w(),i(26,"div",24)(27,"span"),s(28,"or create account with email"),n()(),i(29,"div",25)(30,"button",26),S(),i(31,"svg",27),c(32,"path",28),n(),s(33," Email "),n(),w(),i(34,"button",29),S(),i(35,"svg",27),c(36,"path",30),n(),s(37," Phone "),n()(),w(),i(38,"form",31,0)(40,"div",32)(41,"label",33),s(42,"Full Name"),n(),c(43,"input",34)(44,"sr-validation-message",35),n(),i(45,"div",32)(46,"label",36),s(47,"Email Address"),n(),c(48,"input",37)(49,"sr-validation-message",38),n(),i(50,"div",32)(51,"label",39),s(52,"Password"),n(),c(53,"input",40),i(54,"div",41),s(55," Password must be at least 8 characters long and include uppercase, lowercase, and numbers. "),n(),c(56,"sr-validation-message",42),n(),i(57,"div",32)(58,"label",43),s(59,"Confirm Password"),n(),c(60,"input",44)(61,"sr-validation-message",45),n(),i(62,"div",46),c(63,"input",47),i(64,"label",48),s(65," I agree to the "),i(66,"a",49),s(67,"Terms of Service"),n(),s(68," and "),i(69,"a",49),s(70,"Privacy Policy"),n()()(),c(71,"sr-validation-message",50),n(),i(72,"button",51),y("click",function(){v(m);let e=h();return b(e.createAccount())}),s(73," Create Account "),n(),i(74,"div",52)(75,"span",53),s(76,"Already have an account? "),n(),i(77,"a",54),s(78,"Sign in"),n()()()()()()}if(a&2){let m=h();p(38),d("formGroup",m.registrationForm),p(6),d("messages",m.validationMessages.fullName),p(5),d("messages",m.validationMessages.email),p(7),d("messages",m.validationMessages.password),p(5),d("messages",m.validationMessages.confirmPassword),p(10),d("messages",m.validationMessages.argementStatus),p(),d("disabled",m.isFormSubmited)}}function Me(a,o){a&1&&c(0,"sr-otp-verification")}var pe=(()=>{let o=class o{constructor(r,e,t,l){this.router=r,this.fb=e,this.srApiClient=t,this.rideStore=l,this.isFormSubmited=!1,this.validationMessages=me}ngOnInit(){this.createForm()}createAccount(){if(this.registrationForm.invalid){this.registrationForm.markAllAsTouched(),V.scrollToFirstInvalidControl(this.registrationForm);return}this.isFormSubmited||(this.isFormSubmited=!1,this.rideStore.set("signUpData",this.registrationForm.value),this.srApiClient.createAccount({emailId:this.registrationForm.value?.email,userName:this.registrationForm.value?.fullName,password:this.registrationForm.value?.password}).subscribe({next:r=>{this.isFormSubmited=!0,this.rideStore.set("signUpData",this.registrationForm.value),console.log(r)},error:r=>{this.isFormSubmited=!1,console.log(r)},complete:()=>{this.isFormSubmited=!0,this.rideStore.set("signUpData",this.registrationForm.value),console.log("Account created (No Content)")}}))}pageLink(r){this.router.navigate([r])}createForm(){this.registrationForm=this.fb.group({fullName:["",[g.required,g.minLength(5)]],email:["",[g.required,g.email]],argementStatus:["",[g.required]],password:["",[g.required,this.createPasswordStrengthValidator()]],confirmPassword:["",[g.required,this.createPasswordStrengthValidator()]]},{validator:this.confirmPasswordValidator("password","confirmPassword")})}createPasswordStrengthValidator(){return r=>{let e=r.value;if(!e)return null;let t=/[A-Z]+/.test(e),l=/[a-z]+/.test(e),u=/[0-9]+/.test(e),E=e.length>=8;return t&&l&&u&&E?null:{passwordStrength:{hasUpperCase:t,hasLowerCase:l,hasNumeric:u,isLongEnough:E}}}}confirmPasswordValidator(r,e){return t=>{let l=t.get(r),u=t.get(e);return!l||!u?null:u.hasError("required")||l.value===u.value?(u.errors&&u.errors.mustMatch&&u.setErrors(null),null):(u.setErrors({mustMatch:!0}),{mustMatch:!0})}}};o.\u0275fac=function(e){return new(e||o)(f(P),f(z),f(C),f(x))},o.\u0275cmp=M({type:o,selectors:[["app-signup"]],viewQuery:function(e,t){if(e&1&&N(Ee,5,W),e&2){let l;A(l=T())&&(t.formControls=l)}},standalone:!1,decls:3,vars:2,consts:[["formControlName",""],[1,"auth-page"],["id","signup-page","class","page",4,"ngIf"],[4,"ngIf"],["id","signup-page",1,"page"],[1,"back-btn","back-to-home",3,"click"],["width","20","height","20","fill","none","stroke","currentColor","viewbox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-logo"],[1,"auth-title"],[1,"auth-subtitle"],[1,"auth-form"],[1,"social-login","d-none"],[1,"btn-social"],["width","18","height","18","viewbox","0 0 24 24"],["fill","#4285f4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34a853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#fbbc05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#ea4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],["width","18","height","18","viewbox","0 0 24 24","fill","#1877f2"],["d","M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"],[1,"auth-divider"],[1,"signup-toggle"],["type","button","id","signup-email-btn",1,"active"],["width","16","height","16","fill","none","stroke","currentColor","viewbox","0 0 24 24",2,"display","inline-block","margin-right","4px","vertical-align","middle"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["type","button","id","signup-phone-btn"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["id","signup-form",3,"formGroup"],[1,"form-group"],["for","signup-name",1,"form-label-auth"],["type","text","id","signup-name","formControlName","fullName","placeholder","Enter your full name","required","",1,"form-control-auth"],["for","fullName",3,"messages"],["for","signup-email",1,"form-label-auth"],["type","email","id","signup-email","placeholder","Enter your email","formControlName","email","required","",1,"form-control-auth"],["for","email",3,"messages"],["for","signup-password",1,"form-label-auth"],["type","password","id","signup-password","placeholder","Create a password","formControlName","password","required","",1,"form-control-auth"],[1,"password-requirements"],["for","password",3,"messages"],["for","signup-confirm-password",1,"form-label-auth"],["type","password","id","signup-confirm-password","placeholder","Confirm your password","formControlName","confirmPassword","required","",1,"form-control-auth"],["for","confirmPassword",3,"messages"],[1,"form-check","mb-3"],["type","checkbox","id","terms-agreement","formControlName","argementStatus","required","",1,"form-check-input"],["for","terms-agreement",1,"form-check-label","small","text-muted"],["href","#",1,"auth-link"],["for","argementStatus",3,"messages"],["type","button","id","signup-submit",1,"btn-auth-primary",3,"click","disabled"],[1,"text-center","mt-4"],[1,"text-muted","small"],["routerLink","/sign-in","id","switch-to-login",1,"auth-link"]],template:function(e,t){e&1&&(i(0,"div",1),_(1,Fe,79,7,"div",2)(2,Me,1,0,"sr-otp-verification",3),n()),e&2&&(p(),d("ngIf",!t.isFormSubmited),p(),d("ngIf",t.isFormSubmited))},dependencies:[O,G,R,re,j,q,oe,ae,U,H,Q,de,te],styles:[".signup-toggle[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1.5rem}.signup-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.5rem;border:2px solid #6b7280;border-radius:12px;background:#fff;color:#6b7280;font-weight:600;transition:all .3s ease}.signup-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-color:#4f46e5;color:#4f46e5;background:#eef2ff}"]});let a=o;return a})();var ce=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=I({type:o}),o.\u0275inj=F({providers:[L],imports:[D,B,le]});let a=o;return a})();var Ie=[{path:"",component:pe}],rt=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=I({type:o}),o.\u0275inj=F({providers:[C,V,x],imports:[D,B,ce,ie.forChild(Ie)]});let a=o;return a})();export{rt as a};
