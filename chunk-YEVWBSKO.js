import{a as D}from"./chunk-LSK3WB6J.js";import{a as ee}from"./chunk-5AT4LRJW.js";import{a as Q,b as Z}from"./chunk-JOBG55BO.js";import{a as te,b as ie}from"./chunk-FT6RPUJH.js";import{b as K,c as X}from"./chunk-IN3M743O.js";import{Aa as F,D as r,G as g,H as I,Ha as V,I as N,J as b,Ja as A,Ka as C,Na as z,O as c,Oa as v,P as t,Pa as j,Q as e,Qa as H,R as p,Sa as L,V as T,Va as G,W as h,X as M,Xa as q,Ya as $,Za as U,_a as Y,cb as J,da as i,ea as S,eb as k,fa as f,ga as P,gb as W,k as E,o as O,s as w,sa as B,t as y,ta as R,u as x,v as _}from"./chunk-CVDO2SLE.js";function oe(a,o){a&1&&(t(0,"span",55),i(1,"Verified"),e())}function ae(a,o){if(a&1&&(t(0,"div",32)(1,"div",33)(2,"div",36),i(3,"Vehicle"),e(),t(4,"div",37),i(5),e()()()),a&2){let n=M(2);r(5),P("",n.ride.vehicleModel," (",n.ride.vehicleColour,")")}}function le(a,o){if(a&1&&(t(0,"option",56),i(1),e()),a&2){let n=o.$implicit;c("value",n),r(),P("",n," ",n===1?"Seat":"Seats")}}function de(a,o){if(a&1){let n=T();t(0,"main",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11)(7,"h2",12),i(8,"Ride Details"),e(),t(9,"div",13)(10,"div",14),i(11),e(),t(12,"div")(13,"h4",15),i(14),b(15,oe,2,0,"span",16),e(),t(16,"div",17)(17,"div",18),i(18,"\u2B50\u2B50\u2B50\u2B50\u2B50"),e(),t(19,"span",19),i(20),e()()()()(),t(21,"div",20)(22,"div",21)(23,"h5",22),i(24,"Route"),e(),t(25,"div",13)(26,"div",23),p(27,"div",24)(28,"div",25)(29,"div",26),e(),t(30,"div",27)(31,"div",28)(32,"div",29),i(33,"Pickup Location"),e(),t(34,"div",30),i(35),e()(),t(36,"div")(37,"div",29),i(38,"Drop-off Location"),e(),t(39,"div",30),i(40),e()()()()(),t(41,"div",21)(42,"h5",22),i(43,"Trip Details"),e(),t(44,"div",31)(45,"div",32)(46,"div",33),x(),t(47,"svg",34),p(48,"path",35),e(),_(),t(49,"div")(50,"div",36),i(51,"Date"),e(),t(52,"div",37),i(53),e()()()(),t(54,"div",32)(55,"div",33),x(),t(56,"svg",34),p(57,"path",38),e(),_(),t(58,"div")(59,"div",36),i(60,"Time"),e(),t(61,"div",37),i(62),e()()()(),t(63,"div",32)(64,"div",39),x(),t(65,"svg",34),p(66,"path",40),e(),_(),t(67,"div")(68,"div",36),i(69,"Price per Seat"),e(),t(70,"div",41),i(71),e()()()(),b(72,ae,6,2,"div",42),e()(),t(73,"div",21)(74,"h5",22),i(75,"Booking Information"),e(),t(76,"form",43),h("ngSubmit",function(){w(n);let l=M();return y(l.onSubmit())}),t(77,"div",28)(78,"label",44),i(79),e(),t(80,"select",45)(81,"option",46),i(82,"Select seats"),e(),b(83,le,2,3,"option",47),e()(),t(84,"div",28)(85,"label",44),i(86,"Passenger Name"),e(),p(87,"input",48),e(),t(88,"div",28)(89,"label",44),i(90,"Contact Number"),e(),p(91,"input",49),e(),t(92,"div",21)(93,"label",44),i(94,"Special Requirements (Optional)"),e(),p(95,"textarea",50),e(),t(96,"div",51)(97,"div",52)(98,"span",37),i(99,"Total Amount"),e(),t(100,"span",53),i(101),e()()(),t(102,"button",54),i(103," Confirm Booking "),e()()()()()()()()()()}if(a&2){let n=M();r(11),f(" ",n.ride.driverInitial," "),r(3),f(" ",n.driverName," "),r(),c("ngIf",n.ride.verified),r(5),f("(",n.ride.rating,")"),r(15),S(n.ride.sourceLocation),r(5),S(n.ride.destinationLocation),r(13),S(n.formattedDate),r(9),S(n.formattedTime),r(9),f("$",n.ride.pricePerPerson),r(),c("ngIf",n.ride.vehicleModel),r(4),c("formGroup",n.bookingForm),r(3),f("Number of Seats (",n.ride.noOfSeatsAvailable," available)"),r(4),c("ngForOf",n.seatArray),r(18),f("$",n.totalAmount),r(),c("disabled",n.bookingForm.invalid)}}var ne=(()=>{let o=class o{constructor(d,l,m,u,s){this.fb=d,this.rideStore=l,this.rideService=m,this.bookingService=u,this.router=s,this.profilePanelShow=!1,this.isOpen=!1,this.submitting=!1}ngOnInit(){this.ride=this.rideStore.get("selectedRide"),this.bookingForm=this.fb.group({seatsCount:["",[v.required,v.min(1)]],passengerName:["",v.required],contact:["",[v.required,v.pattern("^[0-9]*$")]],notes:[""]})}get totalAmount(){return(this.bookingForm.get("seatsCount")?.value||0)*(this.ride?.pricePerPerson||0)}get driverName(){return this.ride?.driver||"Anonymous Driver"}get seatArray(){let d=this.ride?.noOfSeatsAvailable||0;return Array.from({length:d},(l,m)=>m+1)}get formattedDate(){return this.ride?.rideTime?new Date(this.ride.rideTime).toLocaleDateString():""}get formattedTime(){return this.ride?.rideTime?new Date(this.ride.rideTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}onSubmit(){if(this.bookingForm.valid){this.submitting=!0;let d={riderId:16,rideId:this.ride?.rideId,passengerName:this.bookingForm.value.passengerName,contactNo:this.bookingForm.value.contact,seatsRequested:this.bookingForm.value.seatsCount,totalAmount:this.totalAmount,notes:this.bookingForm.value.notes};this.rideService.bookRide(d).pipe(E(()=>this.submitting=!1)).subscribe({next:l=>{this.bookingService.setBookedStatus(!0),console.log("Booking Success:",l),this.router.navigate(["/booking-success"])},error:l=>{console.error("Booking failed:",l),alert("There was an error processing your booking. Please try again.")}})}}openProfile(d){this.profilePanelShow=d}toggleMobileMenu(d){this.isOpen=d}};o.\u0275fac=function(l){return new(l||o)(g(J),g(C),g(k),g(D),g(V))},o.\u0275cmp=I({type:o,selectors:[["sr-ride-booking"]],standalone:!1,decls:5,vars:3,consts:[["id","home-page",1,"page","min-vh-100","position-relative"],[3,"isProfileOpen","isOpen"],[3,"isHideProfile","profilePanelShow"],[3,"isProfileOpen","isClose","isOpen"],["class","main-content",4,"ngIf"],[1,"main-content"],[1,"container"],[1,"row"],[1,"col-lg-8","mx-auto"],[1,"card","border-0","shadow-sm","ride-card"],[1,"card-body","p-0"],[1,"ride-header"],[1,"mb-3","fw-bold"],[1,"d-flex","align-items-center","gap-3"],[1,"driver-avatar"],[1,"mb-1","fw-bold"],["class","ms-2 badge bg-light text-primary","style","font-size: 0.7rem;",4,"ngIf"],[1,"d-flex","align-items-center","gap-2"],[1,"text-warning"],[1,"opacity-90"],[1,"p-4"],[1,"mb-4"],[1,"fw-bold","mb-3"],[1,"route-visualizer"],[1,"dot","start"],[1,"line"],[1,"dot","end"],[1,"flex-grow-1"],[1,"mb-3"],[1,"small","text-muted","mb-1"],[1,"fw-semibold","fs-5"],[1,"row","g-3"],[1,"col-md-6"],[1,"detail-badge"],["width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"small","text-muted"],[1,"fw-semibold"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"detail-badge","price-highlight"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"fw-bold","fs-5","text-success"],["class","col-md-6",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-label","fw-semibold"],["formControlName","seatsCount",1,"form-select","form-control-custom"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","passengerName","placeholder","Enter your name",1,"form-control","form-control-custom"],["type","tel","formControlName","contact","placeholder","Enter phone number",1,"form-control","form-control-custom"],["formControlName","notes","rows","3",1,"form-control","form-control-custom"],[1,"total-banner","p-3","mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","fs-4","text-primary"],["type","submit",1,"btn","btn-gradient","text-white","w-100","py-3",3,"disabled"],[1,"ms-2","badge","bg-light","text-primary",2,"font-size","0.7rem"],[3,"value"]],template:function(l,m){l&1&&(t(0,"div",0)(1,"sr-header-app",1),h("isProfileOpen",function(s){return m.openProfile(s)})("isOpen",function(s){return m.toggleMobileMenu(s)}),e(),t(2,"sr-profile",2),h("isHideProfile",function(s){return m.openProfile(s)}),e(),t(3,"sr-mobile-menu",3),h("isProfileOpen",function(s){return m.openProfile(s)})("isClose",function(s){return m.toggleMobileMenu(s)}),e(),b(4,de,104,15,"main",4),e()),l&2&&(r(2),c("profilePanelShow",m.profilePanelShow),r(),c("isOpen",m.isOpen),r(),c("ngIf",m.ride))},dependencies:[B,R,L,U,Y,z,$,j,H,G,q,te,K,Q],styles:[".ride-card[_ngcontent-%COMP%]{border-radius:20px;overflow:hidden}.ride-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);padding:2rem;color:#fff}.ride-header[_ngcontent-%COMP%]   .driver-avatar[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:#fff;color:#4f46e5;font-size:1.5rem;font-weight:700;display:flex;align-items:center;justify-content:center}.route-visualizer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.route-visualizer[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.route-visualizer[_ngcontent-%COMP%]   .dot.start[_ngcontent-%COMP%]{background:#4f46e5}.route-visualizer[_ngcontent-%COMP%]   .dot.end[_ngcontent-%COMP%]{background:#059669}.route-visualizer[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:2px;height:40px;background:#e5e7eb}.detail-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;background:#f9fafb;border-radius:12px;color:#6b7280}.detail-badge.price-highlight[_ngcontent-%COMP%]{background:#dcfce7;color:#059669}.form-control-custom[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;border:2px solid #e5e7eb}.form-control-custom[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#4f46e5}.total-banner[_ngcontent-%COMP%]{background:#eff6ff;border-radius:12px;border:2px solid #dbeafe}.btn-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);border:none;border-radius:12px;transition:transform .2s}.btn-gradient[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);opacity:.95}.btn-gradient[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.opacity-90[_ngcontent-%COMP%]{opacity:.9}"]});let a=o;return a})();var me=[{path:"",component:ne}],Te=(()=>{let o=class o{};o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=N({type:o}),o.\u0275inj=O({providers:[k,ee,C],imports:[F,W,ie,X,Z,A.forChild(me)]});let a=o;return a})();export{Te as RideBookingModule};
