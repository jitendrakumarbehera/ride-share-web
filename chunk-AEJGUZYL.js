import{a as Q,b as Z,c as re,d as se}from"./chunk-NUIQ6725.js";import{b as me}from"./chunk-35OPR62A.js";import{a as W,b as K,c as ie,d as ne}from"./chunk-2LW4H3FV.js";import{a as te,b as de}from"./chunk-JOBG55BO.js";import{a as ce,b as pe}from"./chunk-FT6RPUJH.js";import{b as ee,c as le}from"./chunk-IN3M743O.js";import{$ as k,Aa as N,D as o,G as L,H as P,I as y,J as E,Ja as F,Ka as j,Na as G,O as c,Oa as M,P as e,Pa as z,Q as t,Qa as B,R as m,S as C,Sa as $,T as V,Ta as q,V as w,Va as Y,W as h,X as g,Xa as J,ba as I,cb as U,da as s,ea as O,eb as X,fa as _,fb as oe,ga as D,gb as ae,o as R,pa as T,s as p,sa as A,t as u,ta as H,u as f,v}from"./chunk-CVDO2SLE.js";function ve(a,d){a&1&&(C(0),e(1,"div",21),f(),e(2,"svg",22),m(3,"path",23),t(),v(),e(4,"h4",24),s(5,"No rides published yet"),t(),e(6,"p"),s(7,"Start by publishing your first ride above!"),t()(),V())}function be(a,d){if(a&1&&(C(0),e(1,"div",21),f(),e(2,"svg",22),m(3,"path",23),t(),v(),e(4,"h4",24),s(5,"No rides published yet"),t(),e(6,"p"),s(7),t()(),V()),a&2){let n=g();o(7),O(n.errorMessage)}}function Se(a,d){a&1&&(C(0),e(1,"div",21),f(),e(2,"svg",22),m(3,"path",23),t(),v(),e(4,"h4",24),s(5,"No rides published yet"),t()(),V())}function xe(a,d){if(a&1){let n=w();e(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"h4",30),s(5),e(6,"span",31),s(7,"\u2192"),t(),s(8),t(),e(9,"span",32),s(10),t()(),e(11,"div",33)(12,"div",34),f(),e(13,"svg",35),m(14,"path",36),t(),s(15),t(),v(),e(16,"div",34),f(),e(17,"svg",35),m(18,"path",37),t(),s(19),t(),v(),e(20,"div",34),f(),e(21,"svg",35),m(22,"path",38),t(),s(23),t()()(),v(),e(24,"div",39),s(25),t()(),e(26,"div",40)(27,"div",41),f(),e(28,"svg",42),m(29,"path",43)(30,"path",44),t(),v(),e(31,"span"),s(32),t()(),e(33,"div",41),f(),e(34,"svg",42),m(35,"path",45),t(),v(),e(36,"span"),s(37),t()(),e(38,"div",41),f(),e(39,"svg",42),m(40,"path",46),t(),v(),e(41,"span"),s(42),t()()(),e(43,"div",47)(44,"button",48),h("click",function(){let r=p(n).$implicit,l=g(2);return u(l.openEditModal(r.id))}),f(),e(45,"svg",35),m(46,"path",49),t(),s(47," Edit "),t(),v(),e(48,"button",50),h("click",function(){let r=p(n).$implicit,l=g(2);return u(l.toggleRideStatus(r.id,r.status))}),f(),e(49,"svg",35),m(50,"path",51),t(),s(51),t(),v(),e(52,"button",52),h("click",function(){let r=p(n).$implicit,l=g(2);return u(l.openDeleteModal(r.id))}),f(),e(53,"svg",35),m(54,"path",53),t(),s(55," Delete "),t()()()}if(a&2){let n=d.$implicit;o(5),_(" ",n.sourceLocation," "),o(3),_(" ",n.destinationLocation," "),o(),I("active",n.status==="Active")("inactive",n.status==="Inactive")("completed",n.status==="Completed"),o(),_(" \u25CF ",n.status," "),o(5),_(" ",n.rideDate," "),o(4),_(" ",n.rideTime," "),o(4),_(" ",n.noOfSeatsAvailable," seats "),o(2),_("$",n.price),o(7),_("",n.views," views"),o(5),_("",n.inquiries," inquiries"),o(5),_("",n.bookings," bookings"),o(9),_(" ",n.status==="Active"?"Deactivate":"Activate"," ")}}function Me(a,d){if(a&1&&(e(0,"div"),E(1,xe,56,17,"div",25),t()),a&2){let n=g();o(),c("ngForOf",n.rideList)}}function we(a,d){if(a&1){let n=w();e(0,"form",54),m(1,"input",55),e(2,"div",56)(3,"div",57),m(4,"sr-location-picker",58)(5,"sr-validation-message",59),t(),e(6,"div",57),m(7,"sr-location-picker",60)(8,"sr-validation-message",61),t(),e(9,"div",57)(10,"label",62),s(11,"Date"),t(),e(12,"sr-date-time-picker",63),h("dateTimeSelect",function(r){p(n);let l=g();return u(l.handleRideDateChange(r))}),t(),m(13,"sr-validation-message",64),t(),e(14,"div",57)(15,"label",62),s(16,"Time"),t(),e(17,"sr-date-time-picker",65),h("dateTimeSelect",function(r){p(n);let l=g();return u(l.handleRideDateChange(r))}),t(),m(18,"sr-validation-message",66),t(),e(19,"div",57)(20,"label",62),s(21,"Seats"),t(),m(22,"input",67)(23,"sr-validation-message",68),t(),e(24,"div",57)(25,"label",62),s(26,"Price ($)"),t(),m(27,"input",69)(28,"sr-validation-message",70),t()()()}if(a&2){let n=g();c("formGroup",n.editRide),o(),c("value",n.currentRideId),o(4),c("messages",n.validationMessages.sourceLocation),o(3),c("messages",n.validationMessages.destinationLocation),o(4),c("openAnimation","left")("mode","date")("selectionMode","range")("isModal","modal")("dateFormat","MM-DD-YYYY"),o(),c("messages",n.validationMessages.rideDate),o(4),c("mode","time"),o(),c("messages",n.validationMessages.rideTime),o(5),c("messages",n.validationMessages.noOfSeatsAvailable),o(5),c("messages",n.validationMessages.price)}}function ke(a,d){if(a&1){let n=w();e(0,"button",71),h("click",function(){p(n);let r=g();return u(r.closeModal("edit"))}),s(1," Cancel "),t(),e(2,"button",72),h("click",function(){p(n);let r=g();return u(r.saveChanges())}),s(3," Save Changes "),t()}}function Te(a,d){if(a&1&&(e(0,"div",73),f(),e(1,"svg",74),m(2,"path",53),t()(),v(),e(3,"h3",75),s(4),t(),e(5,"p",76),s(6,"Are you sure you want to delete this ride? This action cannot be undone."),t()),a&2){let n=g();o(4),_("Delete Ride? (ID: ",n.currentRideId,")")}}function Ee(a,d){if(a&1){let n=w();e(0,"button",71),h("click",function(){p(n);let r=g();return u(r.closeModal("delete"))}),s(1," Cancel "),t(),e(2,"button",77),h("click",function(){p(n);let r=g();return u(r.confirmDelete())}),s(3," Delete Ride "),t()}}function Le(a,d){if(a&1&&(e(0,"div",78),f(),e(1,"svg",74),m(2,"path",79),t()(),v(),e(3,"h3",75),s(4),t(),e(5,"p",76),s(6),t()),a&2){let n=g();o(4),D(" ",n.currentRideStatus==="Active"?"Deactivate":"Activate"," Ride? (ID: ",n.currentRideId,") "),o(2),_(" This ride will ",n.currentRideStatus==="Active"?"no longer be visible":"become visible"," to other users. ")}}function Ce(a,d){if(a&1){let n=w();e(0,"button",71),h("click",function(){p(n);let r=g();return u(r.closeModal("toggle"))}),s(1," Cancel "),t(),e(2,"button",80),h("click",function(){p(n);let r=g();return u(r.confirmToggle())}),s(3),t()}if(a&2){let n=g();o(3),_(" Confirm ",n.currentRideStatus==="Active"?"Deactivation":"Activation"," ")}}var ue=(()=>{let d=class d{constructor(i,r,l){this.fb=i,this.rideService=r,this.rideStore=l,this.profilePanelShow=!1,this.isOpen=!1,this.rideList=[],this.isLoading=!0,this.errorMessage=null,this.validationMessages=me,this.isEditModalOpen=!1,this.isDeleteModalOpen=!1,this.isToggleModalOpen=!1,this.currentRideId=null,this.currentRideStatus="Active",this.editRide=this.fb.group({rideId:[""],status:[""],sourceLocation:["New York",M.required],destinationLocation:["Boston",M.required],rideDate:[new Date().toISOString().split("T")[0],M.required],rideTime:["08:00",M.required],noOfSeatsAvailable:[3,[M.required,M.min(1)]],price:[25,[M.required,M.min(.01)]]})}ngOnInit(){this.isLoading=!0,this.errorMessage=null,this.rideService.getPublishRide(this.rideStore.get("JwtToken")).subscribe({next:i=>{this.rideList=i,this.isLoading=!1},error:i=>{this.isLoading=!1,this.rideList=[{id:"R001-345",sourceLocation:"New York City, NY",destinationLocation:"Philadelphia, PA",rideDate:"2025-12-10",rideTime:"07:30",price:28.5,totalSeats:4,noOfSeatsAvailable:3,status:"Active",views:152,inquiries:12,bookings:5,vehicleModel:"Honda Civic",vehicleColour:"Blue"},{id:"R002-678",sourceLocation:"Boston, MA",destinationLocation:"Washington D.C.",rideDate:"2025-12-15",rideTime:"14:00",price:35,totalSeats:3,noOfSeatsAvailable:3,status:"Inactive",views:10,inquiries:0,bookings:0,vehicleModel:"Toyota RAV4",vehicleColour:"Silver"},{id:"R003-901",sourceLocation:"Philadelphia, PA",destinationLocation:"Harrisburg, PA",rideDate:"2025-11-01",rideTime:"18:00",price:15,totalSeats:5,noOfSeatsAvailable:0,status:"Completed",views:450,inquiries:25,bookings:5,vehicleModel:"Nissan Versa",vehicleColour:"Red"}],console.error("API Error:",i)}})}openProfile(i){console.log(i),this.profilePanelShow=i}openEditModal(i){console.log(`Open edit modal for ride: ${i}`),this.currentRideId=i,this.editRide.patchValue({sourceLocation:this.rideList.find(r=>r.id===i)?.sourceLocation||""}),this.isEditModalOpen=!0}toggleRideStatus(i,r){console.log(`Toggle status for ride: ${i}. Current: ${r}`),this.currentRideId=i,this.currentRideStatus=r,this.isToggleModalOpen=!0}openDeleteModal(i){console.log(`Open delete modal for ride: ${i}`),this.currentRideId=i,this.isDeleteModalOpen=!0}ngOnDestroy(){this.rideSubscription&&this.rideSubscription.unsubscribe()}openToggleModal(i,r){this.currentRideId=i,this.currentRideStatus=r,this.isToggleModalOpen=!0}closeModal(i){i==="edit"&&(this.isEditModalOpen=!1),i==="delete"&&(this.isDeleteModalOpen=!1),i==="toggle"&&(this.isToggleModalOpen=!1),this.currentRideId=null}saveChanges(){this.editRide.valid&&(console.log(`Saving changes for ride ${this.currentRideId}:`,this.editRide.value),this.editRide.get("rideId")?.setValue(this.currentRideId),this.rideService.editRide(this.editRide.value,this.rideStore.get("JwtToken")).subscribe({next:i=>{this.rideList=i,this.closeModal("edit")},error:i=>{this.closeModal("edit"),console.error("API Error:",i)}}))}confirmDelete(){console.log(`CONFIRMED: Deleting ride ${this.currentRideId}`),this.editRide.get("rideId")?.setValue(this.currentRideId),this.editRide.get("status")?.setValue(this.currentRideStatus),this.rideService.deleteRide(this.editRide.value,this.rideStore.get("JwtToken")).subscribe({next:i=>{this.rideList=i,this.closeModal("delete")},error:i=>{this.closeModal("delete"),console.error("API Error:",i)}})}confirmToggle(){let i=this.currentRideStatus==="Active"?"Inactive":"Active";console.log(`CONFIRMED: Toggling ride ${this.currentRideId} to ${i}`),this.closeModal("toggle"),this.editRide.get("rideId")?.setValue(this.currentRideId),this.editRide.get("status")?.setValue(i),this.rideService.editRide(this.editRide.value,this.rideStore.get("JwtToken")).subscribe({next:r=>{this.rideList=r,this.closeModal("delete")},error:r=>{this.closeModal("delete"),console.error("API Error:",r)}})}toggleMobileMenu(i){console.log(i),this.isOpen=i}handleRideDateChange(i){this.editRide.get("rideDate")?.setValue(i),console.log("Ride Date Updated:",i)}};d.\u0275fac=function(r){return new(r||d)(L(U),L(X),L(j))},d.\u0275cmp=P({type:d,selectors:[["sr-publish-list"]],standalone:!1,decls:34,vars:18,consts:[["editRideBody",""],["editRideFooter",""],["deleteConfirmBody",""],["deleteConfirmFooter",""],["toggleConfirmBody",""],["toggleConfirmFooter",""],["id","home-page",1,"page","min-vh-100","position-relative"],[3,"isProfileOpen","isOpen"],[3,"isHideProfile","profilePanelShow"],[3,"isProfileOpen","isClose","isOpen"],[1,"main-content"],[1,"container"],[1,"card","border-0","shadow-sm","mb-5",2,"border-radius","16px"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0","text-dark","fw-semibold","fs-4"],["id","my-rides-count",1,"badge","bg-primary",2,"font-size","0.9rem","padding","0.5rem 1rem","border-radius","20px"],["id","my-rides-container"],[4,"ngIf"],[3,"closed","isOpen","title","bodyTemplate","footerTemplate"],[3,"closed","isOpen","contentClass","bodyTemplate","footerTemplate"],[1,"empty-rides-message"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"fw-semibold","mb-2"],["class","my-ride-card",4,"ngFor","ngForOf"],[1,"my-ride-card"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"flex-grow-1"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"mb-0","route-text","fs-5"],[1,"route-arrow"],[1,"ride-status-badge"],[1,"d-flex","flex-wrap","gap-3","small","text-muted"],[1,"d-flex","align-items-center","gap-1"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"price-text","text-end"],[1,"ride-stats"],[1,"ride-stat-item"],["width","18","height","18","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"d-flex","gap-2","mt-3","flex-wrap"],[1,"ride-action-btn","btn-edit",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"ride-action-btn","btn-toggle",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"ride-action-btn","btn-delete",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[3,"formGroup"],["type","hidden",3,"value"],[1,"row","g-3"],[1,"col-md-6"],["label","From","placeholder","Departure city","formControlName","sourceLocation"],["for","sourceLocation",3,"messages"],["label","To","placeholder","Destination city","formControlName","destinationLocation"],["for","destinationLocation",3,"messages"],[1,"form-label","fw-semibold","text-dark","small"],["formControlName","rideDate",3,"dateTimeSelect","openAnimation","mode","selectionMode","isModal","dateFormat"],["for","rideDate",3,"messages"],["formControlName","rideTime",3,"dateTimeSelect","mode"],["for","rideTime",3,"messages"],["type","number","formControlName","noOfSeatsAvailable",1,"form-control","form-control-custom"],["for","noOfSeatsAvailable",3,"messages"],["type","number","formControlName","price","step","0.01",1,"form-control","form-control-custom"],["for","price",3,"messages"],["type","button",1,"btn","btn-outline-secondary",2,"border-radius","10px",3,"click"],["type","submit",1,"btn","btn-gradient","text-white",2,"border-radius","10px",3,"click"],[1,"confirm-icon","danger"],["width","30","height","30","fill","none","stroke","currentColor","viewBox","0 0 24 24"],[1,"mb-2","fw-bold"],[1,"text-muted","mb-4"],["type","button",1,"btn","btn-danger",2,"border-radius","10px",3,"click"],[1,"confirm-icon","warning"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["type","button",1,"btn","btn-gradient","text-white",2,"border-radius","10px",3,"click"]],template:function(r,l){if(r&1){let S=w();e(0,"div",6)(1,"sr-header-app",7),h("isProfileOpen",function(b){return p(S),u(l.openProfile(b))})("isOpen",function(b){return p(S),u(l.toggleMobileMenu(b))}),t(),e(2,"sr-profile",8),h("isHideProfile",function(b){return p(S),u(l.openProfile(b))}),t(),e(3,"sr-mobile-menu",9),h("isProfileOpen",function(b){return p(S),u(l.openProfile(b))})("isClose",function(b){return p(S),u(l.toggleMobileMenu(b))}),t(),e(4,"main",10)(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14)(9,"h3",15),s(10,"My Published Rides"),t(),e(11,"span",16),s(12,"0 Active"),t()(),e(13,"div",17),m(14,"sr-skeleton-loader"),E(15,ve,8,0,"ng-container",18)(16,be,8,1,"ng-container",18)(17,Se,6,0,"ng-container",18)(18,Me,2,1,"div",18),t()()()()()(),e(19,"sr-modal",19),h("closed",function(){return p(S),u(l.closeModal("edit"))}),t(),E(20,we,29,14,"ng-template",null,0,T)(22,ke,4,0,"ng-template",null,1,T),e(24,"sr-modal",20),h("closed",function(){return p(S),u(l.closeModal("delete"))}),t(),E(25,Te,7,1,"ng-template",null,2,T)(27,Ee,4,0,"ng-template",null,3,T),e(29,"sr-modal",20),h("closed",function(){return p(S),u(l.closeModal("toggle"))}),t(),E(30,Le,7,3,"ng-template",null,4,T)(32,Ce,4,1,"ng-template",null,5,T)}if(r&2){let S=k(21),x=k(23),b=k(26),he=k(28),ge=k(31),fe=k(33);o(2),c("profilePanelShow",l.profilePanelShow),o(),c("isOpen",l.isOpen),o(12),c("ngIf",l.isLoading),o(),c("ngIf",l.errorMessage),o(),c("ngIf",!l.isLoading&&!l.errorMessage&&l.rideList.length===0),o(),c("ngIf",!l.isLoading&&!l.errorMessage&&l.rideList.length>0),o(),c("isOpen",l.isEditModalOpen)("title","Edit Ride Details (ID: "+l.currentRideId+")")("bodyTemplate",S)("footerTemplate",x),o(5),c("isOpen",l.isDeleteModalOpen)("contentClass","modal-content-custom confirm-dialog")("bodyTemplate",b)("footerTemplate",he),o(5),c("isOpen",l.isToggleModalOpen)("contentClass","modal-content-custom confirm-dialog")("bodyTemplate",ge)("footerTemplate",fe)}},dependencies:[A,H,$,G,q,z,B,Y,J,oe,ce,ee,W,te,K,Q,Z],encapsulation:2});let a=d;return a})();var Ve=[{path:"",component:ue}],it=(()=>{let d=class d{};d.\u0275fac=function(r){return new(r||d)},d.\u0275mod=y({type:d}),d.\u0275inj=R({imports:[N,ae,pe,le,ie,de,ne,re,se,F.forChild(Ve)]});let a=d;return a})();export{it as PublishListModule};
